\smalltitle{سوال 4}
\begin{enumerate}
    \item نام شرکت‌های تولید کننده هواپیمایی که حداقل به دو شرکت هواپیمایی مختلف، هواپیما فروخته‌اند.
    \item در ابتدا سوال را کمی شفاف تر می‌کنیم. فرض کنید که سازنده‌ی هواپیما
    \lr{S1}
    یک هواپیمای زرد به شرکت
    \lr{J1}
    و یک هواپیمای زرد دیگر به
    \lr{S2}
    فروخته است. این شرکت نباید در لیست نهایی ما بیاید. با این فرض مسئله را حل می‌کنیم.
    \\
    مسئله را به صورتی حل می‌کنیم که ابتدا لیست شرکت‌هایی را در می‌آوریم که حداقل دو هواپیمای همرنگ فروخته باشند.
    برای این کار می‌توانیم در ابتدا جدول هواپیما را به جدول
    \lr{SAJ}، \lr{join}
    بزنیم. سپس لیستی از هواپیما‌ها، شرکت‌ها و رنگ‌ها و تعداد داریم. سپس با جمع زدن ستون تعداد بر اساس رنگ و شرکت سازنده
    به جدولی می‌رسیم که نشان می‌دهد هر شرکت هواپیمایی چند هواپیما به رنگ‌های مختلف فروخته است. این کار را به صورت زیر
    انجام می‌دهیم:
    \begin{gather*}
        \text{ColorCount} := \text{رنگ، شماره تولد کننده هواپیما}\mathcal{G}_{\operatorname{sum}(\text{تعداد})}(\text{SAJ} \infty A)
    \end{gather*}
    حال لیست شرکت‌هایی را در می‌آوریم که ستون تعداد در جدول بالا بیشتر از 1 باشد. یعنی بیشتر از یک هواپیما به
    یک رنگ خاص فروخته باشند. سپس این لیست را منهای لیست کل شرکت‌ها می‌کنیم.
    \begin{gather*}
        \text{SResult} := \Pi_{S\#} (S) - \Pi_{S\#}(\sigma_{\text{تعداد} > 1}(\text{ColorCount}))
    \end{gather*}
    در نهایت برای پیدا کردن اسم این شرکت‌ها، این جدول را جوین می‌کنیم با جدول
    $S$:
    \begin{gather*}
        \Pi_{\text{نام تولید کننده}} (\text{SResult} \infty S)
    \end{gather*}
    \item
    \begin{gather*}
        \mathcal{G}_{\operatorname{sum}(\text{تعداد})}(\sigma_{S\# ~ = ~S1 ~ \&\& ~ A\#~=~a1} \text{SAJ})
    \end{gather*}
    \item s
\end{enumerate}